#include <Arduino.h>
#include <WiFi.h>

void setup() {
  Serial.begin(115200);
  delay(1000);
  
  Serial.println("WiFi Network Scanner");
  Serial.println("====================");
  
  WiFi.mode(WIFI_STA);
  WiFi.disconnect();
  delay(100);
  
  Serial.println("Scanning for networks...");
  int n = WiFi.scanNetworks();
  
  if (n == 0) {
    Serial.println("No networks found");
  } else {
    Serial.printf("Found %d networks:\n\n", n);
    
    for (int i = 0; i < n; ++i) {
      Serial.printf("%2d: %-32s %3ddBm %s %s\n", 
                   i + 1,
                   WiFi.SSID(i).c_str(),
                   WiFi.RSSI(i),
                   (WiFi.encryptionType(i) == WIFI_AUTH_OPEN) ? "OPEN" : "ENCRYPTED",
                   WiFi.BSSIDstr(i).c_str());
    }
  }
  
  Serial.println("\nLooking for 'Abbashotspot'...");
  bool found = false;
  for (int i = 0; i < n; ++i) {
    if (WiFi.SSID(i) == "Abbashotspot") {
      Serial.printf("✅ Found Abbashotspot! Signal: %ddBm\n", WiFi.RSSI(i));
      found = true;
      break;
    }
  }
  
  if (!found) {
    Serial.println("❌ Abbashotspot not found!");
    Serial.println("Make sure your hotspot is turned on and in range.");
  }
  
  Serial.println("\nScan complete. Restarting in 10 seconds...");
}

void loop() {
  delay(10000);
  ESP.restart();
}